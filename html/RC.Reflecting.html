<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>RC.Reflecting</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library RC.Reflecting</h1>

<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.1/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.1/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.1/stdlib//Coq.Logic.Classical_Prop.html#"><span class="id" title="library">Classical_Prop</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.1/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">FunctionalExtensionality</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.1/stdlib//Coq.Logic.PropExtensionality.html#"><span class="id" title="library">PropExtensionality</span></a><br/>
.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.1/stdlib//Coq.Lists.List.html#ListNotations"><span class="id" title="module">ListNotations</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">RC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;<a class="idref" href="RC.CpdtTactics.html#"><span class="id" title="library">CpdtTactics</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.TacticsMatch.html#"><span class="id" title="library">TacticsMatch</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.Utilities.html#"><span class="id" title="library">Utilities</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.Decidability.html#"><span class="id" title="library">Decidability</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.ListUtil.html#"><span class="id" title="library">ListUtil</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.Sorts.html#"><span class="id" title="library">Sorts</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.Act.html#"><span class="id" title="library">Act</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.Runtime.html#"><span class="id" title="library">Runtime</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.Term.html#"><span class="id" title="library">Term</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.Role.html#"><span class="id" title="library">Role</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.TranscriptsRole.html#"><span class="id" title="library">TranscriptsRole</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.Proc.html#"><span class="id" title="library">Proc</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.TranscriptsProc.html#"><span class="id" title="library">TranscriptsProc</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.SaturationClass.html#"><span class="id" title="library">SaturationClass</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.SaturationRules.html#"><span class="id" title="library">SaturationRules</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.SaturationLoop.html#"><span class="id" title="library">SaturationLoop</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.Compile.html#"><span class="id" title="library">Compile</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="RC.Reasoning.html#"><span class="id" title="library">Reasoning</span></a><br/>
.<br/>

<br/>
</div>

<div class="doc">
In this version we rely on the <span class="inlinecode"><a class="idref" href="RC.SaturationClass.html#Satd"><span class="id" title="record">Satd</span></a></span> typeclass 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="GoodPullback" class="idref" href="#GoodPullback"><span class="id" title="section">GoodPullback</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> {<a id="RTV:1" class="idref" href="#RTV:1"><span class="id" title="binder">RTV</span></a> : <a class="idref" href="RC.Runtime.html#RTVal"><span class="id" title="class">RTVal</span></a>}. 
<br/>
</div>

<div class="doc">
Assume a saturated proc 
</div>
<div class="code">
<span class="id" title="keyword">Variable</span> <a id="GoodPullback.pr" class="idref" href="#GoodPullback.pr"><span class="id" title="variable">pr</span></a>: <a class="idref" href="RC.Proc.html#Proc"><span class="id" title="definition">Proc</span></a>.<br/>
<span class="id" title="keyword">Context</span> {<a id="S:3" class="idref" href="#S:3"><span class="id" title="binder">S</span></a> : @<a class="idref" href="RC.SaturationClass.html#Satd"><span class="id" title="class">Satd</span></a> <a class="idref" href="RC.Reflecting.html#GoodPullback.pr"><span class="id" title="variable">pr</span></a>}.<br/>

<br/>
</div>

<div class="doc">
Assume a good  store 
</div>
<div class="code">
<span class="id" title="keyword">Variable</span> <a id="GoodPullback.sto" class="idref" href="#GoodPullback.sto"><span class="id" title="variable">sto</span></a> : <a class="idref" href="RC.Proc.html#loc"><span class="id" title="inductive">loc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="RC.Runtime.html#rtval"><span class="id" title="method">rtval</span></a> .<br/>
<span class="id" title="keyword">Hypothesis</span> <a id="GoodPullback.goodstore" class="idref" href="#GoodPullback.goodstore"><span class="id" title="variable">goodstore</span></a> : <a class="idref" href="RC.TranscriptsProc.html#good_store"><span class="id" title="definition">good_store</span></a> <a class="idref" href="RC.Reflecting.html#GoodPullback.pr"><span class="id" title="variable">pr</span></a> <a class="idref" href="RC.Reflecting.html#GoodPullback.sto"><span class="id" title="variable">sto</span></a>.<br/>

<br/>
</div>

<div class="doc">
the Term-rtval composition of sto and cs.
    Recall that <span class="inlinecode"><a class="idref" href="RC.Proc.html#tl"><span class="id" title="inductive">tl</span></a></span> is the term-to-location relation 
    determined by the Proc

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="tv" class="idref" href="#tv"><span class="id" title="definition">tv</span></a> : <a class="idref" href="RC.Utilities.html#rel"><span class="id" title="definition">rel</span></a> <a class="idref" href="RC.Term.html#Term"><span class="id" title="inductive">Term</span></a> <a class="idref" href="RC.Runtime.html#rtval"><span class="id" title="method">rtval</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="RC.Utilities.html#composeRF"><span class="id" title="inductive">composeRF</span></a> (<a class="idref" href="RC.Proc.html#tl"><span class="id" title="inductive">tl</span></a> <a class="idref" href="RC.Reflecting.html#GoodPullback.pr"><span class="id" title="variable">pr</span></a>) <a class="idref" href="RC.Reflecting.html#GoodPullback.sto"><span class="id" title="variable">sto</span></a>.<br/>

<br/>

<br/>

<br/>
</div>

<div class="doc">
a tactic to conveniently work with the goodness assumption 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">des</span> :=  <span class="id" title="tactic">destruct</span> <span class="id" title="var">goodstore</span> <span class="id" title="keyword">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Sto_same</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Sto_sorts</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Sto_chash</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Sto_inv</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Sto_pair</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Sto_encr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Sto_hash</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Sto_quote</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Sto_first</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Sto_scnd</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Sto_decr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Sto_pubof</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Sto_cquote</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]]]]]]]]]]]].<br/>

<br/>

<br/>
</div>

<div class="doc">
<a id="lab168"></a><h1 class="section">Functional</h1>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tvFunctional" class="idref" href="#tvFunctional"><span class="id" title="lemma">tvFunctional</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="RC.TranscriptsRole.html#tv_functional"><span class="id" title="definition">tv_functional</span></a> <a class="idref" href="RC.Reflecting.html#tv"><span class="id" title="definition">tv</span></a> .<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span> <span class="id" title="var">He</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H3</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h1</span>:= @<a class="idref" href="RC.SaturationClass.html#satd_sameness"><span class="id" title="method">satd_sameness</span></a> <a class="idref" href="RC.Reflecting.html#GoodPullback.pr"><span class="id" title="variable">pr</span></a> <a class="idref" href="RC.Reflecting.html#GoodPullback.S"><span class="id" title="variable">S</span></a> <span class="id" title="var">t</span> <span class="id" title="var">y</span> <span class="id" title="var">y0</span> <span class="id" title="var">e</span> <span class="id" title="var">e0</span> <span class="id" title="var">He</span> <span class="id" title="var">H0</span> <span class="id" title="var">H4</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="RC.TranscriptsProc.html#same_linked_same_value"><span class="id" title="lemma">same_linked_same_value</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="RC.Reflecting.html#GoodPullback.goodstore"><span class="id" title="variable">goodstore</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab169"></a><h1 class="section">Sorts</h1>

<div class="paragraph"> </div>

 Uses tv_functional 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="tvSorts" class="idref" href="#tvSorts"><span class="id" title="lemma">tvSorts</span></a>: <a class="idref" href="RC.TranscriptsRole.html#tv_sorts"><span class="id" title="definition">tv_sorts</span></a> <a class="idref" href="RC.Reflecting.html#tv"><span class="id" title="definition">tv</span></a>.<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t1</span> <span class="id" title="var">r</span> <span class="id" title="var">Helem</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">des</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h0</span>:= @<a class="idref" href="RC.SaturationClass.html#satd_sort_check"><span class="id" title="method">satd_sort_check</span></a> <a class="idref" href="RC.Reflecting.html#GoodPullback.pr"><span class="id" title="variable">pr</span></a> <a class="idref" href="RC.Reflecting.html#GoodPullback.S"><span class="id" title="variable">S</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">y</span> <span class="id" title="var">e</span> <span class="id" title="var">Helem</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">h0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l'</span> [<span class="id" title="var">e'</span> [<span class="id" title="var">P1</span> <span class="id" title="var">P2</span>]]].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Sto_sorts</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h2</span>:= @<a class="idref" href="RC.Reflecting.html#tvFunctional"><span class="id" title="lemma">tvFunctional</span></a> <span class="id" title="var">t1</span> (<a class="idref" href="RC.Reflecting.html#GoodPullback.sto"><span class="id" title="variable">sto</span></a> <span class="id" title="var">y</span>) (<a class="idref" href="RC.Reflecting.html#GoodPullback.sto"><span class="id" title="variable">sto</span></a> <span class="id" title="var">l'</span>) <span class="id" title="var">Helem</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Sto_sorts</span> <span class="id" title="var">l'</span> (<a class="idref" href="RC.Term.html#sort_of"><span class="id" title="definition">sort_of</span></a> <span class="id" title="var">t1</span>) <span class="id" title="var">P2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Sto_sorts</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">h2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab170"></a><h1 class="section">Pairing</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tvPair" class="idref" href="#tvPair"><span class="id" title="lemma">tvPair</span></a>: <a class="idref" href="RC.TranscriptsRole.html#tv_pair"><span class="id" title="definition">tv_pair</span></a> <a class="idref" href="RC.Reflecting.html#tv"><span class="id" title="definition">tv</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">r</span> <span class="id" title="var">Htv</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Htv</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="RC.Proc.html#is_pair_expression_for"><span class="id" title="definition">is_pair_expression_for</span></a> <a class="idref" href="RC.Reflecting.html#GoodPullback.pr"><span class="id" title="variable">pr</span></a> (<a class="idref" href="RC.Term.html#Pr"><span class="id" title="constructor">Pr</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>) <span class="id" title="var">e</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="RC.Proc.html#is_pair_expression_for"><span class="id" title="definition">is_pair_expression_for</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_all_matches</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.1/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">andb_true_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="RC.Proc.html#get_binding"><span class="id" title="lemma">get_binding</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">l</span> <a class="idref" href="RC.Reflecting.html#GoodPullback.pr"><span class="id" title="variable">pr</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e1</span> <span class="id" title="var">Q1</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="RC.Proc.html#get_binding"><span class="id" title="lemma">get_binding</span></a> <span class="id" title="var">t2</span> <span class="id" title="var">l0</span> <a class="idref" href="RC.Reflecting.html#GoodPullback.pr"><span class="id" title="variable">pr</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e2</span> <span class="id" title="var">Q2</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="RC.Reflecting.html#GoodPullback.sto"><span class="id" title="variable">sto</span></a> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">∃</span> (<a class="idref" href="RC.Reflecting.html#GoodPullback.sto"><span class="id" title="variable">sto</span></a> <span class="id" title="var">l0</span>) .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Sto_pair</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h1</span>:= <a class="idref" href="RC.SaturationClass.html#satd_pair_analyze"><span class="id" title="method">satd_pair_analyze</span></a> <span class="id" title="var">H0</span> <span class="id" title="var">e1</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">h1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">h1l</span> <span class="id" title="var">h1r</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">h1l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l1</span> <span class="id" title="var">P1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">h1r</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l2</span> <span class="id" title="var">P2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="RC.Reflecting.html#GoodPullback.sto"><span class="id" title="variable">sto</span></a> <span class="id" title="var">l1</span>) ; <span class="id" title="tactic">∃</span> (<a class="idref" href="RC.Reflecting.html#GoodPullback.sto"><span class="id" title="variable">sto</span></a> <span class="id" title="var">l2</span>) .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="RC.Runtime.html#rtpairI"><span class="id" title="method">rtpairI</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Sto_first</span> <span class="id" title="var">t1</span> <span class="id" title="var">y</span> <span class="id" title="var">l1</span> <span class="id" title="var">P1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Sto_scnd</span> <span class="id" title="var">t2</span> <span class="id" title="var">y</span> <span class="id" title="var">l2</span> <span class="id" title="var">P2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab171"></a><h1 class="section">Encryption</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tvEncr" class="idref" href="#tvEncr"><span class="id" title="lemma">tvEncr</span></a>: <a class="idref" href="RC.TranscriptsRole.html#tv_encr"><span class="id" title="definition">tv_encr</span></a> <a class="idref" href="RC.Reflecting.html#tv"><span class="id" title="definition">tv</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>  <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">r</span> <span class="id" title="var">Htv</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Htv</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> ((<a class="idref" href="RC.Proc.html#is_encr_expression_for"><span class="id" title="definition">is_encr_expression_for</span></a> <a class="idref" href="RC.Reflecting.html#GoodPullback.pr"><span class="id" title="variable">pr</span></a> (<a class="idref" href="RC.Term.html#En"><span class="id" title="constructor">En</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>) <span class="id" title="var">e</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="RC.Proc.html#is_encr_expression_for"><span class="id" title="definition">is_encr_expression_for</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_all_matches</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.1/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">andb_true_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="RC.Proc.html#get_binding"><span class="id" title="lemma">get_binding</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">l</span> <a class="idref" href="RC.Reflecting.html#GoodPullback.pr"><span class="id" title="variable">pr</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e1</span> <span class="id" title="var">Q1</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="RC.Proc.html#get_binding"><span class="id" title="lemma">get_binding</span></a> <span class="id" title="var">t2</span> <span class="id" title="var">l0</span> <a class="idref" href="RC.Reflecting.html#GoodPullback.pr"><span class="id" title="variable">pr</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e2</span> <span class="id" title="var">Q2</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="RC.Reflecting.html#GoodPullback.sto"><span class="id" title="variable">sto</span></a> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">∃</span> (<a class="idref" href="RC.Reflecting.html#GoodPullback.sto"><span class="id" title="variable">sto</span></a> <span class="id" title="var">l0</span>) .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Sto_encr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="RC.TranscriptsRole.html#decr_condition"><span class="id" title="definition">decr_condition</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h1</span>:= <a class="idref" href="RC.SaturationClass.html#satd_decryption_keys"><span class="id" title="method">satd_decryption_keys</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">h1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">h1</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">y</span> <span class="id" title="var">e</span> <span class="id" title="var">H0</span> <span class="id" title="var">e1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">h1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">kd</span> [<span class="id" title="var">lkd</span> [<span class="id" title="var">ekd</span> [<span class="id" title="var">P1</span> <span class="id" title="var">P2</span>]]]].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h2</span>:= @<a class="idref" href="RC.SaturationClass.html#satd_decryption"><span class="id" title="method">satd_decryption</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">y</span> <span class="id" title="var">e</span> <span class="id" title="var">H0</span> <span class="id" title="var">e1</span> <span class="id" title="var">kd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lkd</span> <span class="id" title="var">ekd</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">h2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lp</span> <span class="id" title="var">D</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="RC.Reflecting.html#GoodPullback.sto"><span class="id" title="variable">sto</span></a> <span class="id" title="var">lp</span>) .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="RC.Reflecting.html#GoodPullback.sto"><span class="id" title="variable">sto</span></a> <span class="id" title="var">lkd</span>) .<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Sto_same</span> <span class="id" title="var">Sto_sorts</span> <span class="id" title="var">Sto_inv</span> <span class="id" title="var">Sto_pair</span> <span class="id" title="var">Sto_encr</span> <span class="id" title="var">Sto_hash</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Sto_quote</span> <span class="id" title="var">Sto_first</span> <span class="id" title="var">Sto_scnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="RC.TranscriptsProc.html#sto_decr"><span class="id" title="definition">sto_decr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Sto_decr</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="RC.Term.html#are_inv_then_inv"><span class="id" title="lemma">are_inv_then_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">P2</span>;  <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;{  <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Sto_decr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab172"></a><h1 class="section">Hashing</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tvHash" class="idref" href="#tvHash"><span class="id" title="lemma">tvHash</span></a> :  <a class="idref" href="RC.TranscriptsRole.html#tv_hash"><span class="id" title="definition">tv_hash</span></a> <a class="idref" href="RC.Reflecting.html#tv"><span class="id" title="definition">tv</span></a> .<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">r</span> <span class="id" title="var">Htv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">Htv</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">y</span> <span class="id" title="var">into</span> <span class="id" title="var">lh</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">e</span> <span class="id" title="var">into</span> <span class="id" title="var">eh</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h1</span>:= @<a class="idref" href="RC.SaturationClass.html#satd_hash_justified"><span class="id" title="method">satd_hash_justified</span></a> <span class="id" title="var">_</span> <a class="idref" href="RC.Reflecting.html#GoodPullback.S"><span class="id" title="variable">S</span></a> <span class="id" title="var">t</span> <span class="id" title="var">lh</span> <span class="id" title="var">eh</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">h1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lt</span> [<span class="id" title="var">et</span> <span class="id" title="var">Q</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="RC.Reflecting.html#GoodPullback.sto"><span class="id" title="variable">sto</span></a> <span class="id" title="var">lt</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h2</span>:= @<a class="idref" href="RC.SaturationClass.html#satd_hash_check"><span class="id" title="method">satd_hash_check</span></a> <span class="id" title="var">_</span> <a class="idref" href="RC.Reflecting.html#GoodPullback.S"><span class="id" title="variable">S</span></a> <span class="id" title="var">t</span> <span class="id" title="var">lt</span> <span class="id" title="var">lh</span> <span class="id" title="var">et</span> <span class="id" title="var">eh</span> <span class="id" title="var">H0</span> <span class="id" title="var">Q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Sto_chash</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab173"></a><h1 class="section">Quotation</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tvQot" class="idref" href="#tvQot"><span class="id" title="lemma">tvQot</span></a> : <a class="idref" href="RC.TranscriptsRole.html#tv_qot"><span class="id" title="definition">tv_qot</span></a> <a class="idref" href="RC.Reflecting.html#tv"><span class="id" title="definition">tv</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">r</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">y</span> <span class="id" title="var">into</span> <span class="id" title="var">lq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">des</span>;  <span class="id" title="tactic">clear</span> <span class="id" title="var">Sto_same</span> <span class="id" title="var">Sto_sorts</span> <span class="id" title="var">Sto_inv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Sto_pair</span> <span class="id" title="var">Sto_encr</span> <span class="id" title="var">Sto_hash</span> <span class="id" title="var">Sto_first</span> <span class="id" title="var">Sto_scnd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Sto_decr</span> <span class="id" title="var">Sto_chash</span> <span class="id" title="var">Sto_pubof</span> <span class="id" title="var">Sto_quote</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Sto_cquote</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Sto_cquote</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<a class="idref" href="RC.SaturationClass.html#satd_qotChck"><span class="id" title="method">satd_qotChck</span></a> <a class="idref" href="RC.Reflecting.html#GoodPullback.pr"><span class="id" title="variable">pr</span></a> <a class="idref" href="RC.Reflecting.html#GoodPullback.S"><span class="id" title="variable">S</span></a> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lq</span> <span class="id" title="var">e</span> <span class="id" title="var">H1</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tvKeyPair" class="idref" href="#tvKeyPair"><span class="id" title="lemma">tvKeyPair</span></a> : <a class="idref" href="RC.TranscriptsRole.html#tv_key_pair"><span class="id" title="definition">tv_key_pair</span></a> <a class="idref" href="RC.Reflecting.html#tv"><span class="id" title="definition">tv</span></a> .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">r</span> <span class="id" title="var">r0</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> .<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">y</span> <span class="id" title="var">into</span> <span class="id" title="var">l1</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">e</span> <span class="id" title="var">into</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H3</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">y</span> <span class="id" title="var">into</span> <span class="id" title="var">l2</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">e</span> <span class="id" title="var">into</span> <span class="id" title="var">e2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h1</span>:= @<a class="idref" href="RC.SaturationClass.html#satd_key_pairs"><span class="id" title="method">satd_key_pairs</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H1</span> <span class="id" title="var">H0</span> <span class="id" title="var">H5</span> ).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">des</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Sto_inv</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Sto_inv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Proposition</span> <a id="good_satd_rl_pullback" class="idref" href="#good_satd_rl_pullback"><span class="id" title="lemma">good_satd_rl_pullback</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="RC.TranscriptsRole.html#good_term_rtval"><span class="id" title="definition">good_term_rtval</span></a> <a class="idref" href="RC.Reflecting.html#tv"><span class="id" title="definition">tv</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="RC.Reflecting.html#tvSorts"><span class="id" title="lemma">tvSorts</span></a> .<br/>
<span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="RC.Reflecting.html#tvFunctional"><span class="id" title="lemma">tvFunctional</span></a>.<br/>
<span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="RC.Reflecting.html#tvPair"><span class="id" title="lemma">tvPair</span></a> .<br/>
<span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="RC.Reflecting.html#tvHash"><span class="id" title="lemma">tvHash</span></a>.<br/>
<span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="RC.Reflecting.html#tvKeyPair"><span class="id" title="lemma">tvKeyPair</span></a>.<br/>
<span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="RC.Reflecting.html#tvEncr"><span class="id" title="lemma">tvEncr</span></a> .<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="RC.Reflecting.html#tvQot"><span class="id" title="lemma">tvQot</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="RC.Reflecting.html#GoodPullback"><span class="id" title="section">GoodPullback</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab174"></a><h2 class="section">Reflecting Transcripts Theorem</h2>

<div class="paragraph"> </div>

 Need to show that

<div class="paragraph"> </div>

<ul class="doclist">
<li> tv pr sto is a good_term_rtval

<div class="paragraph"> </div>


</li>
<li> it makes the same role transcript as the given proc transcript

</li>
</ul>

<div class="paragraph"> </div>

The first is the work in the section above

<div class="paragraph"> </div>

The second just uses the facts that (i) compilation makes traces line
up and (ii) composition is preserved by all the lifting through <span class="inlinecode"><a class="idref" href="RC.Act.html#Act"><span class="id" title="inductive">Act</span></a></span>
and <span class="inlinecode"><span class="id" title="library">List</span></span>

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="reflecting_transcripts" class="idref" href="#reflecting_transcripts"><span class="id" title="lemma">reflecting_transcripts</span></a> {<a id="RTV:6" class="idref" href="#RTV:6"><span class="id" title="binder">RTV</span></a>: <a class="idref" href="RC.Runtime.html#RTVal"><span class="id" title="class">RTVal</span></a>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="rl:7" class="idref" href="#rl:7"><span class="id" title="binder">rl</span></a>: <a class="idref" href="RC.Role.html#Role"><span class="id" title="definition">Role</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="pr:8" class="idref" href="#pr:8"><span class="id" title="binder">pr</span></a> : <a class="idref" href="RC.Proc.html#Proc"><span class="id" title="definition">Proc</span></a>) (<a id="S:9" class="idref" href="#S:9"><span class="id" title="binder">S</span></a>: @<a class="idref" href="RC.SaturationClass.html#Satd"><span class="id" title="class">Satd</span></a> <a class="idref" href="RC.Reflecting.html#pr:8"><span class="id" title="variable">pr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:10" class="idref" href="#tr:10"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.17.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="RC.Act.html#Act"><span class="id" title="inductive">Act</span></a> <a class="idref" href="RC.Runtime.html#rtval"><span class="id" title="method">rtval</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="RC.Compile.html#compileR"><span class="id" title="inductive">compileR</span></a> <a class="idref" href="RC.Reflecting.html#rl:7"><span class="id" title="variable">rl</span></a> <a class="idref" href="RC.Reflecting.html#pr:8"><span class="id" title="variable">pr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="RC.TranscriptsProc.html#transcript_for_procR"><span class="id" title="definition">transcript_for_procR</span></a> <a class="idref" href="RC.Reflecting.html#pr:8"><span class="id" title="variable">pr</span></a> <a class="idref" href="RC.Reflecting.html#tr:10"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="RC.TranscriptsRole.html#transcript_for_role"><span class="id" title="definition">transcript_for_role</span></a> <a class="idref" href="RC.Reflecting.html#rl:7"><span class="id" title="variable">rl</span></a> <a class="idref" href="RC.Reflecting.html#tr:10"><span class="id" title="variable">tr</span></a> .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">rl</span> <span class="id" title="var">pr</span> <span class="id" title="var">S</span> <span class="id" title="var">tr</span> <span class="id" title="var">Hcompile</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sto</span> [<span class="id" title="var">Hgood</span> <span class="id" title="var">Htr</span>] ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">pullback</span>:= @<a class="idref" href="RC.Reflecting.html#good_satd_rl_pullback"><span class="id" title="lemma">good_satd_rl_pullback</span></a> <span class="id" title="var">RTV</span> <span class="id" title="var">_</span>  <span class="id" title="var">_</span> <span class="id" title="var">sto</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hgood</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="RC.TranscriptsRole.html#transcript_for_role"><span class="id" title="definition">transcript_for_role</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="RC.Reflecting.html#tv"><span class="id" title="definition">tv</span></a> <span class="id" title="var">pr</span> <span class="id" title="var">sto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">lineup</span> := @<a class="idref" href="RC.Reasoning.html#compile_traces_tl"><span class="id" title="lemma">compile_traces_tl</span></a> <span class="id" title="var">rl</span> <span class="id" title="var">pr</span> <span class="id" title="var">Hcompile</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">lineup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="RC.Reflecting.html#tv"><span class="id" title="definition">tv</span></a> <span class="id" title="tactic">in</span> ×.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a1</span> := <a class="idref" href="RC.Utilities.html#composeRF_composeR"><span class="id" title="lemma">composeRF_composeR</span></a> (<a class="idref" href="RC.Proc.html#tl"><span class="id" title="inductive">tl</span></a> <span class="id" title="var">pr</span>) <span class="id" title="var">sto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">a1</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">a1</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a2</span>:= <a class="idref" href="RC.Act.html#compose_Act_mapRs"><span class="id" title="lemma">compose_Act_mapRs</span></a> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <span class="id" title="var">a2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="RC.ListUtil.html#List_mapR_compose"><span class="id" title="lemma">List_mapR_compose</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>